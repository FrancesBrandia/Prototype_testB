<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.gstatic.com"> <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="../prism/prism.css">
    <link rel="stylesheet" href="../main.css">
    <link rel="stylesheet" href="../app-components/app-header.css">
    <link rel="stylesheet" href="../app-components/app-sidebar.css">
    <link rel="stylesheet" href="../app-components/code-block.css">
    <link rel="stylesheet" href="../styles/tables.css">
    <title>Tables</title>
</head>
<body>
    <script defer src="../prism/prism.js"></script>
    <script defer src="../app-components/app-header.js"></script>
    <script defer src="../app-components/app-sidebar.js"></script>
    <script defer src="../app-components/code-block.js"></script>
    <script defer src="../components-code-display/tables/table-code.js"></script>
    <script defer src="../components-code-display/tables/accordion-table-code.js"></script>
    <script defer src="../components-code-display/tables/filter-accordion-code.js"></script>

    <app-header></app-header>
    <app-sidebar id="tables"></app-sidebar>

    <div class="page-content">
        <div class="container">
            <a
                class="css-link"    
                href="https://github.com/ACRCode/ACR-master-component-library/blob/main/src/styles/tables.css"
                target="_blank"
            >
                <h1>Tables</h1>
                <div class="material-icons open-link-icon">
                    open_in_new
                </div>
            </a>

            <div class="component">
                <h2>Table header/row</h2>

                <div class="component-backdrop">
                    <div class="table">
                        <div class="table-header">
                            <div>Facility ID</div>
                            <div>Station Name</div>
                            <div>Status</div>
                            <div>Fluoroscope Type</div>
                            <div>Manufacturer, Model, Year</div>
                        </div>
                        <div class="table-row">
                            <div>CR-2020021-212997</div>
                            <div>Station name is here</div>
                            <div>Active</div>
                            <div>Mobile fluoroscopes/full size C-arm/single plane</div>
                            <div>Siemans, Siemans AXIOM-Artis, 2017</div>
                        </div>
                        <div class="table-row">
                            <div>CR-2020021-212997</div>
                            <div>Station name is here</div>
                            <div>Active</div>
                            <div>Mobile fluoroscopes/full size C-arm/single plane</div>
                            <div>Siemans, Siemans AXIOM-Artis, 2017</div>
                        </div>
                    </div>
                </div>

                <table-code></table-code>
            </div>

            <div class="component">
                <h2>Accordion table</h2>

                <div class="component-backdrop">
                    <div class="table-accordion">
                        <div class="row">
                            <div class="material-icons expand-row-icon">
                                expand_more
                            </div>
                            <div>023tf405367se338ds64.dcm</div>
                            <div>Image</div>
                            <div>4/14/22, 10:47:46 PM</div>
                            <div class="large-font-size">4/18/22, 14:20:16 PM</div>
                            <div class="material-icons status-icon success">
                                check_circle
                            </div>
                            <div class="material-icons action-icon">
                                delete
                            </div>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-header"><div>Accordion Header</div></div>
                            <div class="accordion-table">Accordion Table</div>
                        </div>
                        <div class="row">
                            <div class="material-icons expand-row-icon">
                                expand_more
                            </div>
                            <div>023tf405367se338ds64.dcm</div>
                            <div>Image</div>
                            <div>4/14/22, 10:47:46 PM</div>
                            <div class="large-font-size">4/18/22, 14:20:16 PM</div>
                            <div class="material-icons status-icon success">
                                check_circle
                            </div>
                            <div class="material-icons action-icon">
                                delete
                            </div>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-header"><div>Accordion Header</div></div>
                            <div class="accordion-table">Accordion Table</div>
                        </div>
                        <div class="row" id="display-accordion">
                            <div class="material-icons expand-row-icon">
                                expand_more
                            </div>
                            <div>023tf405367se338ds64.dcm</div>
                            <div>Image</div>
                            <div>4/14/22, 10:47:46 PM</div>
                            <div class="large-font-size">4/18/22, 14:20:16 PM</div>
                            <div class="material-icons status-icon error">
                                warning
                            </div>
                            <div class="material-icons action-icon">
                                delete
                            </div>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-header">
                                <div>Files submitted: <span class="bold">3/3</span></div>
                                <div>Files in queue: <span class="bold">0/0</span></div>
                                <div>Files in progress: <span class="bold">0/0</span></div>
                                <div>Files successfully submitted: <span class="bold">2/3</span></div>
                                <div>Files failed to submit: <span class="bold error">1/3 Anonymization parsing error</span></div>
                            </div>
                            <div class="accordion-table">
                                <div class="accordion-table-header">
                                    <div>Medical Record No.</div>
                                    <div>Study Instance UID</div>
                                    <div>Study Description</div>
                                    <div>Study Date</div>
                                    <div>Modality</div>
                                    <div class="status">Status</div>
                                </div>
                                <div class="accordion-row">
                                    <div>St8694Ktd_Ec48Sf4888309Dfrdv</div>
                                    <div>68403.2349.8880.6427</div>
                                    <div>Brain Scan</div>
                                    <div>3/26/22, 17:20:00 PM</div>
                                    <div>CR</div>
                                    <div class="material-icons status-icon error">
                                        warning
                                    </div>
                                </div>
                                <div class="accordion-row">
                                    <div>St8694Ktd_Ec48Sf4888309Dfrdv</div>
                                    <div>68403.2349.8880.6427</div>
                                    <div>Lung Scan</div>
                                    <div>3/14/22, 09:55:00 AM</div>
                                    <div>MR</div>
                                    <div class="material-icons status-icon success">
                                        check_circle
                                    </div>
                                </div>
                                <div class="accordion-row">
                                    <div>St8694Ktd_Ec48Sf4888309Dfrdv sdfgsdfgs dgf</div>
                                    <div>68403.2349.8880.6427</div>
                                    <div>Lung Scan</div>
                                    <div>3/14/22, 09:55:00 AM</div>
                                    <div>MR</div>
                                    <div class="material-icons status-icon success">
                                        check_circle
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="material-icons expand-row-icon">
                                expand_more
                            </div>
                            <div>023tf405367se338ds64.dcm</div>
                            <div>Image</div>
                            <div>4/14/22, 10:47:46 PM</div>
                            <div class="large-font-size">4/18/22, 14:20:16 PM</div>
                            <div class="material-icons status-icon success">
                                check_circle
                            </div>
                            <div class="material-icons action-icon">
                                delete
                            </div>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-header"><div>Accordion Header</div></div>
                            <div class="accordion-table">Accordion Table</div>
                        </div>
                    </div>
                </div>

                <accordion-table-code></accordion-table-code>
            </div>

            <div class="component">
                <h2>Filter accordion</h2>

                <div class="component-backdrop">
                    <div class="filter-accordion">
                        <div class="filter-row">
                            <div class="material-icons expand-row-icon">
                                expand_more
                            </div>
                            <div>Accordion Row With Search Filter</div>
                        </div>
                        <div class="accordion-content">
                            <div class="filters">
                                <div class="text-input">
                                    <label for="text-1">Filter by:</label>
                                    <input type="text" id="text-1" name="text_input" placeholder="MRN, Series number, Body area, etc...">
                                </div>
                                <div id="dropdown-1" class="dropdown">
                                    <div class="dropdown-label">
                                        Modality
                                    </div>
                                    <div
                                        class="dropdown-trigger"
                                        onclick="toggleSelectDropdown.call(this)"
                                    >
                                        <div class="dropdown-selection">All</div>
                                        <div class="material-icons dropdown-arrow">
                                            expand_more
                                        </div>
                                        <ul class="dropdown-options">
                                            <li class="dropdown-option" data-value="Selection Item 1">All</li>
                                            <li class="dropdown-option" data-value="Selection Item 2">Selection Item 2</li>
                                            <li class="dropdown-option" data-value="Selection Item 3">Selection Item 3</li>
                                        </ul>
                                    </div>
                                </div>
                                <div id="dropdown-2" class="dropdown">
                                    <div class="dropdown-label">
                                        Study Description
                                    </div>
                                    <div
                                        class="dropdown-trigger"
                                        onclick="toggleSelectDropdown.call(this)"
                                    >
                                        <div class="dropdown-selection">All</div>
                                        <div class="material-icons dropdown-arrow">
                                            expand_more
                                        </div>
                                        <ul class="dropdown-options">
                                            <li class="dropdown-option" data-value="Selection Item 1">All</li>
                                            <li class="dropdown-option" data-value="Selection Item 2">Selection Item 2</li>
                                            <li class="dropdown-option" data-value="Selection Item 3">Selection Item 3</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="action-buttons">
                                    <button class="filter-accordion-button secondary">Reset</button>
                                    <button class="filter-accordion-button primary">Search</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <filter-accordion-code></filter-accordion-code>
            </div>
        </div>
    </div>

    <script>
        // Accordion tables
        const accordionTriggers = document.querySelectorAll('.table-accordion > .row, .filter-accordion > .filter-row');
        accordionTriggers.forEach(trigger => {
            trigger.addEventListener('click', (e) => {
                if (!e.target.classList.contains('action-icon')) {
                    toggleAccordion.call(trigger);
                }
            });
        });

        function toggleAccordion() {
            const selectedAccordion = this.nextElementSibling;
            const accordionArrow = this.querySelector('.expand-row-icon');

            // collapse currently opened accordion (if any) (except the selected accordion)
            accordionTriggers.forEach(trigger => {
                accordion = trigger.nextElementSibling;
                arrow = trigger.querySelector('.expand-row-icon');
                if (accordion !== selectedAccordion) {
                    collapseAccordion(trigger, accordion, arrow);
                }
            });
            
            // toggle the selected accordion
            if (selectedAccordion.style.display === 'flex') {
                collapseAccordion(this, selectedAccordion, accordionArrow);
            } else {
                expandAccordion(this, selectedAccordion, accordionArrow);
            }
        }

        function collapseAccordion(row, accordion, arrow) {
            row.classList.remove('expanded');
            accordion.style.display = 'none';
            arrow.style.transform = 'rotate(0deg)';
        }

        function expandAccordion(row, accordion, arrow) {
            row.classList.add('expanded');
            accordion.style.display = 'flex';
            arrow.style.transform = 'rotate(180deg)';
        }

        // Single select dropdown
        // close dropdowns when clicking outside of them
        window.addEventListener('click', (e) => {
            if (!e.target.matches('.dropdown-trigger, .dropdown-trigger  *')) {
                const activeDropdown = document.querySelector('.dropdown-trigger.expanded');  
                if (activeDropdown) {
                    toggleSelectDropdown.call(activeDropdown);
                }           
            }
        });

        // this === the clicked dropdown-trigger div
        const toggleSelectDropdown = function() {
            // close the currently opened dropdown
            const activeDropdown = document.querySelector('.dropdown-trigger.expanded');
            if (activeDropdown && activeDropdown !== this) {
                toggleSelectDropdown.call(activeDropdown);
            }

            // apply the proper css styles to the dropdown
            const dropdownArrow = this.querySelector('.dropdown-arrow');
            const dropdownSelection = this.querySelector('.dropdown-selection');
            const dropdownContent = this.querySelector('.dropdown-options');
            if (this.classList.contains('expanded')) {
                this.classList.remove('expanded');
                dropdownArrow.style.transform = 'rotate(0deg)';
                dropdownContent.style.visibility = 'hidden';
            } else {
                this.classList.add('expanded');
                dropdownArrow.style.transform = 'rotate(180deg)';
                dropdownContent.style.visibility = 'visible';
            }

            // update the selected option if an option is chosen
            const dropdownOptions = this.querySelectorAll('.dropdown-option');
            dropdownOptions.forEach(option => {
                option.addEventListener('click', () => {
                    dropdownSelection.innerHTML = option.innerHTML;
                });
            });
        }

        // expand the 3rd accordion by default for display purposes
        const displayAccordion = document.getElementById('display-accordion');
        toggleAccordion.call(displayAccordion);
    </script>
</body>
</html>